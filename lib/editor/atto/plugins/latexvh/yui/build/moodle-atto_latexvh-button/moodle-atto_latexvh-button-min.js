YUI.add("moodle-atto_latexvh-button",function(e,t){var n="atto_latexvh",r=function(e){return e.getFullYear()+"."+e.getMonth()+"."+e.getDate()}(new Date),i="http://primat.org/moodle/index.html?v="+r,s="http://primat.org/moodle/bridge.js?v="+r,o="width: 1225px; margin: -22px -7px -65px -25px; height: 572px; border: none;",u="latexvh_iframe",a="IFrameBridge not loaded";e.namespace("M.atto_latexvh").Button=e.Base.create("button",e.M.editor_atto.EditorPlugin,[],{initializer:function(){this.addButton({icon:"btn-icon",iconComponent:"atto_latexvh",buttonName:"btn-icon",callback:this._displayDialogue,callbackArgs:"btn-icon"})},_displayDialogue:function(t,r){t.preventDefault(),YUI.namespace(n).host=this.get("host"),YUI.namespace(n).clickedIcon=r,e.Get.js(s,function(e){e||this.initIframe(IFrameBridge)}.bind(this)),this.markUpdated()},getSender:function(){return function(e){return function(t){e.contentWindow.postMessage(t,"*")}}(document.getElementById(u))},initIframe:function(e){this.showIframe();var t=e(this.getSender());t.addRoute("set",function(e){e=e.split("~"),YUI.namespace(n)[e[0]]=e[1]}),t.addRoute("get",function(e,t){e=e.split("~"),t(e[1],YUI.namespace(n)[e[0]])}),t.addRoute("insert to editor",function(e){YUI.namespace(n).host.insertContentAtFocusPoint(e),YUI.namespace(n).dialogue.hide()}),t.init()},showIframe:function(){var e=1200,t=this.getDialogue({headerContent:M.util.get_string("dialogtitle",n),width:e+"px",focusAfterHide:YUI.namespace(n).clickedIcon});t.width!==e+"px"&&t.set("width",e+"px");var r='<iframe id="{0}" style="{1}" src="{2}"></iframe>'.replace("{0}",u).replace("{1}",o).replace("{2}",i);t.set("bodyContent",r),t.show(),YUI.namespace(n).dialogue=t}})},"@VERSION@",{requires:["moodle-editor_atto-plugin"]});
